(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{98744:function(e,s,r){Promise.resolve().then(r.bind(r,5549))},5549:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return p}});var t=r(57437),a=r(2265),n=r(82749),i=r(24033),l=r(86264),c=r(28203),d=r(25750),o=r(41298),m=r(99670),x=r(45367),u=r(82104),h=r(85754),g=r(27815),f=r(31478),y=r(92105),j=r(1657),b=r(5925);function p(){let{data:e,status:s}=(0,n.useSession)(),r=(0,i.useRouter)(),[p,N]=(0,a.useState)([]),[v,k]=(0,a.useState)(!0),[w,C]=(0,a.useState)(null),[z,S]=(0,a.useState)(!1),[Z,E]=(0,a.useState)(null);(0,a.useEffect)(()=>{if("loading"!==s){if(!e){r.push("/auth/signin?callbackUrl=/my-bookings");return}D()}},[e,s,r]);let D=async()=>{try{let s=await fetch("/api/bookings?userId="+(null==e?void 0:e.user.id));if(!s.ok)throw Error("Failed to fetch bookings");let r=await s.json();N(r)}catch(e){console.error("Error fetching bookings:",e),b.default.error("Failed to load bookings")}finally{k(!1)}},R=async e=>{if(confirm("Are you sure you want to cancel this booking?")){E(e);try{if(!(await fetch("/api/bookings/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"CANCELLED"})})).ok)throw Error("Failed to cancel booking");b.default.success("Booking cancelled successfully"),D()}catch(e){console.error("Error cancelling booking:",e),b.default.error("Failed to cancel booking")}finally{E(null)}}},I=e=>{switch(e){case"CONFIRMED":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"CHECKED_IN":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"CHECKED_OUT":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"CANCELLED":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}},O=e=>{switch(e){case"PAID":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"FAILED":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},A=e=>["PENDING","CONFIRMED"].includes(e.status)&&new Date(e.checkIn)>new Date;return"loading"===s||v?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,t.jsx)(l.Z,{className:"w-8 h-8 animate-spin"})}):e?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)(y.Z,{}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 pt-24",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"My Bookings"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your hotel reservations and view booking details"})]}),0===p.length?(0,t.jsx)(g.Zb,{children:(0,t.jsxs)(g.aY,{className:"p-8 text-center",children:[(0,t.jsx)(c.Z,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No bookings found"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You haven't made any bookings yet."}),(0,t.jsx)(h.z,{onClick:()=>r.push("/booking"),children:"Book a Room"})]})}):(0,t.jsx)("div",{className:"grid gap-6",children:p.map(e=>(0,t.jsxs)(g.Zb,{className:"overflow-hidden",children:[(0,t.jsx)(g.Ol,{className:"pb-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(g.ll,{className:"text-lg",children:["Room ",e.room.number," - ",e.room.type]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Booking ID: ",e.id]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.C,{className:I(e.status),children:e.status.replace("_"," ")}),(0,t.jsx)(f.C,{className:O(e.paymentStatus),children:e.paymentStatus})]})]})}),(0,t.jsxs)(g.aY,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.Z,{className:"w-4 h-4 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Check-in"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,j.p6)(e.checkIn)})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.Z,{className:"w-4 h-4 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Check-out"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,j.p6)(e.checkOut)})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Guests"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.guests})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-medium",children:(0,j.T4)(e.totalAmount)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>{C(e),S(!0)},children:[(0,t.jsx)(m.Z,{className:"w-4 h-4 mr-1"}),"Details"]}),A(e)&&(0,t.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>R(e.id),disabled:Z===e.id,children:[Z===e.id?(0,t.jsx)(l.Z,{className:"w-4 h-4 mr-1 animate-spin"}):(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})]})]})]},e.id))})]}),z&&w&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Booking Details"}),(0,t.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>S(!1),children:(0,t.jsx)(u.Z,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Room"}),(0,t.jsxs)("p",{children:["Room ",w.room.number," - ",w.room.type]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Dates"}),(0,t.jsxs)("p",{children:[(0,j.p6)(w.checkIn)," - ",(0,j.p6)(w.checkOut)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Guests"}),(0,t.jsxs)("p",{children:[w.guests," guest",w.guests>1?"s":""]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Amount"}),(0,t.jsx)("p",{className:"font-semibold",children:(0,j.T4)(w.totalAmount)})]}),w.specialRequests&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Special Requests"}),(0,t.jsx)("p",{className:"text-sm",children:w.specialRequests})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.C,{className:I(w.status),children:w.status.replace("_"," ")}),(0,t.jsx)(f.C,{className:O(w.paymentStatus),children:w.paymentStatus})]})]}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)(h.z,{variant:"outline",onClick:()=>S(!1),children:"Close"})})]})})]}):null}},92105:function(e,s,r){"use strict";r.d(s,{Z:function(){return j}});var t=r(57437),a=r(2265),n=r(61396),i=r.n(n),l=r(6435),c=r(82749),d=r(98253),o=r(44135),m=r(93088),x=r(65883),u=r(82549),h=r(68004),g=r(28203),f=r(67972),y=r(85754);function j(){let[e,s]=(0,a.useState)(!1),{theme:r,setTheme:n}=(0,l.F)(),{data:j}=(0,c.useSession)(),b=[{name:"Home",href:"/"},{name:"Rooms",href:"/rooms"},{name:"Gallery",href:"/gallery"},{name:"Facilities",href:"/facilities"},{name:"About",href:"/about"},{name:"Contact",href:"/contact"}];return(0,t.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsxs)(i(),{href:"/",className:"flex items-center space-x-2",children:[(0,t.jsx)(d.Z,{className:"w-8 h-8 text-primary-600"}),(0,t.jsx)("span",{className:"text-xl font-bold font-serif",children:"SmartHotel"})]}),(0,t.jsx)("div",{className:"hidden md:flex items-center space-x-8",children:b.map(e=>(0,t.jsx)(i(),{href:e.href,className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e.name},e.name))}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(y.z,{variant:"ghost",size:"icon",onClick:()=>n("dark"===r?"light":"dark"),className:"w-9 h-9",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,t.jsx)(m.Z,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}),j?(0,t.jsxs)("div",{className:"hidden sm:flex items-center space-x-2",children:[(0,t.jsx)(y.z,{variant:"outline",asChild:!0,children:(0,t.jsx)(i(),{href:"/my-bookings",children:"My Bookings"})}),"GUEST"!==j.user.role&&(0,t.jsx)(y.z,{variant:"outline",asChild:!0,children:(0,t.jsx)(i(),{href:"/admin",children:"Admin Panel"})}),(0,t.jsxs)(y.z,{variant:"outline",onClick:()=>(0,c.signOut)(),children:[(0,t.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}):(0,t.jsxs)("div",{className:"hidden sm:flex items-center space-x-2",children:[(0,t.jsx)(y.z,{variant:"outline",asChild:!0,children:(0,t.jsx)(i(),{href:"/auth/signin",children:"Sign In"})}),(0,t.jsx)(i(),{href:"/booking",children:(0,t.jsx)(y.z,{className:"btn-primary",children:"Book Now"})})]}),(0,t.jsx)(y.z,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>s(!e),children:e?(0,t.jsx)(u.Z,{className:"h-6 w-6"}):(0,t.jsx)(h.Z,{className:"h-6 w-6"})})]})]}),e&&(0,t.jsx)("div",{className:"md:hidden",children:(0,t.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:[b.map(e=>(0,t.jsx)(i(),{href:e.href,className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md transition-colors",onClick:()=>s(!1),children:e.name},e.name)),j?(0,t.jsxs)("div",{className:"px-3 py-2 space-y-2",children:[(0,t.jsx)(i(),{href:"/my-bookings",className:"w-full",children:(0,t.jsxs)(y.z,{variant:"outline",className:"w-full",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"My Bookings"]})}),"GUEST"!==j.user.role&&(0,t.jsx)(i(),{href:"/admin",className:"w-full",children:(0,t.jsxs)(y.z,{variant:"outline",className:"w-full",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Admin Panel"]})}),(0,t.jsxs)(y.z,{variant:"outline",className:"w-full",onClick:()=>(0,c.signOut)(),children:[(0,t.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}):(0,t.jsxs)("div",{className:"px-3 py-2 space-y-2",children:[(0,t.jsx)(i(),{href:"/auth/signin",className:"w-full",children:(0,t.jsx)(y.z,{variant:"outline",className:"w-full",children:"Sign In"})}),(0,t.jsx)(i(),{href:"/booking",className:"w-full",children:(0,t.jsx)(y.z,{className:"w-full btn-primary",children:"Book Now"})})]})]})})]})})}},31478:function(e,s,r){"use strict";r.d(s,{C:function(){return l}});var t=r(57437);r(2265);var a=r(96061),n=r(1657);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:r}),s),...a})}},85754:function(e,s,r){"use strict";r.d(s,{z:function(){return c}});var t=r(57437),a=r(2265),n=r(96061),i=r(1657);let l=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:r,variant:a,size:n,asChild:c=!1,...d}=e;return(0,t.jsx)("button",{className:(0,i.cn)(l({variant:a,size:n,className:r})),ref:s,...d})});c.displayName="Button"},27815:function(e,s,r){"use strict";r.d(s,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var t=r(57437),a=r(2265),n=r(1657);let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},1657:function(e,s,r){"use strict";r.d(s,{T4:function(){return i},cn:function(){return n},p6:function(){return l}});var t=r(57042),a=r(74769);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,a.m6)((0,t.W)(s))}function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(e)}function l(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}}},function(e){e.O(0,[250,749,284,12,971,938,744],function(){return e(e.s=98744)}),_N_E=e.O()}]);