(()=>{var e={};e.id=5898,e.ids=[5898],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},97963:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d});var a=t(50482),r=t(69108),n=t(62563),l=t.n(n),i=t(68300),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["admin",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,70100)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\calendar\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66294)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,35250)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\calendar\\page.tsx"],m="/admin/calendar/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/calendar/page",pathname:"/admin/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},81872:(e,s,t)=>{Promise.resolve().then(t.bind(t,47753))},47753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(95344),r=t(3729),n=t(47674),l=t(7060),i=t(89895),c=t(25545),d=t(73229),o=t(71532),m=t(97751),x=t(16212),u=t(61351),h=t(69436),p=t(4518),g=t(67235);function j(e){(0,g.Z)(1,arguments);var s=(0,p.Z)(e);return s.setDate(1),s.setHours(0,0,0,0),s}function N(e){(0,g.Z)(1,arguments);var s=(0,p.Z)(e),t=s.getMonth();return s.setFullYear(s.getFullYear(),t+1,0),s.setHours(23,59,59,999),s}var f=t(20641);function y(e,s){(0,g.Z)(2,arguments);var t=(0,p.Z)(e),a=(0,f.Z)(s);if(isNaN(a))return new Date(NaN);if(!a)return t;var r=t.getDate(),n=new Date(t.getTime());return(n.setMonth(t.getMonth()+a+1,0),r>=n.getDate())?n:(t.setFullYear(n.getFullYear(),n.getMonth(),r),t)}var v=t(35434),b=t(44669);function w(){let{data:e}=(0,n.useSession)(),[s,t]=(0,r.useState)(new Date),[w,k]=(0,r.useState)([]),[Z,C]=(0,r.useState)([]),[E,D]=(0,r.useState)(!0),[S,M]=(0,r.useState)(null),[P,_]=(0,r.useState)(null);(0,r.useEffect)(()=>{O()},[s]);let O=async()=>{try{let[e,t]=await Promise.all([fetch("/api/rooms"),fetch(`/api/bookings?startDate=${j(s).toISOString()}&endDate=${N(s).toISOString()}`)]);if(e.ok){let s=await e.json();k(s)}if(t.ok){let e=await t.json();C(e)}}catch(e){console.error("Error fetching data:",e),b.default.error("Failed to load calendar data")}finally{D(!1)}},I=()=>(function(e,s){(0,g.Z)(1,arguments);var t,a=e||{},r=(0,p.Z)(a.start),n=(0,p.Z)(a.end).getTime();if(!(r.getTime()<=n))throw RangeError("Invalid interval");var l=[];r.setHours(0,0,0,0);var i=Number(null!==(t=null==s?void 0:s.step)&&void 0!==t?t:1);if(i<1||isNaN(i))throw RangeError("`options.step` must be a number greater than 1");for(;r.getTime()<=n;)l.push((0,p.Z)(r)),r.setDate(r.getDate()+i),r.setHours(0,0,0,0);return l})({start:j(s),end:N(s)}),q=(e,s)=>Z.filter(t=>{let a=new Date(t.checkIn),r=new Date(t.checkOut);return t.room.id===e&&s>=a&&s<r}),A=e=>{if(0===e.length)return"available";let s=e.find(e=>["PENDING","CONFIRMED","CHECKED_IN"].includes(e.status));return s?"CHECKED_IN"===s.status?"occupied":"CONFIRMED"===s.status?"confirmed":"pending":"available"},H=e=>{switch(e){case"available":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"occupied":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"confirmed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},R=e=>{switch(e){case"available":case"confirmed":return a.jsx(l.Z,{className:"w-4 h-4"});case"occupied":return a.jsx(i.Z,{className:"w-4 h-4"});case"pending":return a.jsx(c.Z,{className:"w-4 h-4"});default:return a.jsx(d.Z,{className:"w-4 h-4"})}},T=e=>{M(e)},Y=()=>S?Z.filter(e=>{let s=new Date(e.checkIn),t=new Date(e.checkOut);return S>=s&&S<t}):[];return E?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Room Availability Calendar"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View room availability and bookings across all dates"})]}),a.jsx(u.Zb,{className:"mb-6",children:a.jsx(u.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>t(function(e,s){return(0,g.Z)(2,arguments),y(e,-(0,f.Z)(1))}(s,1)),children:[a.jsx(o.Z,{className:"w-4 h-4 mr-2"}),"Previous"]}),a.jsx("h2",{className:"text-xl font-semibold",children:(0,v.Z)(s,"MMMM yyyy")}),(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>t(y(s,1)),children:["Next",a.jsx(m.Z,{className:"w-4 h-4 ml-2"})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"lg:col-span-3",children:(0,a.jsxs)(u.Zb,{children:[a.jsx(u.Ol,{children:a.jsx(u.ll,{children:"Room Availability"})}),a.jsx(u.aY,{children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left p-2 font-medium",children:"Room"}),I().map(e=>(0,a.jsxs)("th",{className:"text-center p-2 font-medium min-w-[60px]",children:[a.jsx("div",{className:"text-sm",children:(0,v.Z)(e,"d")}),a.jsx("div",{className:"text-xs text-gray-500",children:(0,v.Z)(e,"EEE")})]},e.toISOString()))]})}),a.jsx("tbody",{children:w.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsxs)("td",{className:"p-2",children:[(0,a.jsxs)("div",{className:"font-medium",children:["Room ",e.number]}),a.jsx("div",{className:"text-sm text-gray-500",children:e.type})]}),I().map(s=>{let t=A(q(e.id,s));return a.jsx("td",{className:"p-1",children:a.jsx("div",{className:`p-2 rounded cursor-pointer hover:opacity-80 transition-opacity ${H(t)}`,onClick:()=>T(s),children:a.jsx("div",{className:"flex items-center justify-center",children:R(t)})})},s.toISOString())})]},e.id))})]})})})]})}),(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)(u.Zb,{children:[a.jsx(u.Ol,{children:a.jsx(u.ll,{children:"Legend"})}),(0,a.jsxs)(u.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-green-100 rounded"}),a.jsx("span",{className:"text-sm",children:"Available"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded"}),a.jsx("span",{className:"text-sm",children:"Confirmed"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-100 rounded"}),a.jsx("span",{className:"text-sm",children:"Pending"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-red-100 rounded"}),a.jsx("span",{className:"text-sm",children:"Occupied"})]})]})]}),S&&(0,a.jsxs)(u.Zb,{children:[a.jsx(u.Ol,{children:a.jsx(u.ll,{children:(0,v.Z)(S,"EEEE, MMMM d, yyyy")})}),a.jsx(u.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[Y().map(e=>(0,a.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"font-medium",children:["Room ",e.room.number]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.user.name," - ",e.guests," guests"]}),a.jsx(h.C,{className:"mt-1",children:e.status.replace("_"," ")})]},e.id)),0===Y().length&&a.jsx("p",{className:"text-gray-500 text-sm",children:"No bookings for this date"})]})})]}),(0,a.jsxs)(u.Zb,{children:[a.jsx(u.Ol,{children:a.jsx(u.ll,{children:"Quick Stats"})}),a.jsx(u.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Total Rooms:"}),a.jsx("span",{className:"font-medium",children:w.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Available Today:"}),a.jsx("span",{className:"font-medium text-green-600",children:w.filter(e=>"AVAILABLE"===e.status).length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Occupied Today:"}),a.jsx("span",{className:"font-medium text-red-600",children:w.filter(e=>"OCCUPIED"===e.status).length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Maintenance:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:w.filter(e=>"MAINTENANCE"===e.status).length})]})]})})]})]})]})]})})}},7060:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},25545:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},73229:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},70100:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});let a=(0,t(86843).createProxy)(String.raw`C:\Users\asith\Documents\SmartHotel\app\admin\calendar\page.tsx`),{__esModule:r,$$typeof:n}=a,l=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1638,9990,4655,4626,7674,5674,7483,1088],()=>t(97963));module.exports=a})();