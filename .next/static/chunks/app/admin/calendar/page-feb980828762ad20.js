(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{13008:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},81291:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62898).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},17158:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62898).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6141:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},25750:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},82104:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62898).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},22084:function(e,t,r){Promise.resolve().then(r.bind(r,51872))},51872:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var s=r(57437),n=r(2265),a=r(82749),i=r(13008),l=r(25750),c=r(6141),d=r(82104),o=r(81291),u=r(17158),m=r(85754),x=r(27815),f=r(31478),h=r(57458),g=r(92895);function v(e){(0,g.Z)(1,arguments);var t=(0,h.Z)(e);return t.setDate(1),t.setHours(0,0,0,0),t}function p(e){(0,g.Z)(1,arguments);var t=(0,h.Z)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}var y=r(37274);function j(e,t){(0,g.Z)(2,arguments);var r=(0,h.Z)(e),s=(0,y.Z)(t);if(isNaN(s))return new Date(NaN);if(!s)return r;var n=r.getDate(),a=new Date(r.getTime());return(a.setMonth(r.getMonth()+s+1,0),n>=a.getDate())?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}var N=r(95459),b=r(5925);function w(){let{data:e}=(0,a.useSession)(),[t,r]=(0,n.useState)(new Date),[w,k]=(0,n.useState)([]),[Z,C]=(0,n.useState)([]),[E,D]=(0,n.useState)(!0),[M,S]=(0,n.useState)(null),[O,R]=(0,n.useState)(null);(0,n.useEffect)(()=>{I()},[t]);let I=async()=>{try{let[e,r]=await Promise.all([fetch("/api/rooms"),fetch("/api/bookings?startDate=".concat(v(t).toISOString(),"&endDate=").concat(p(t).toISOString()))]);if(e.ok){let t=await e.json();k(t)}if(r.ok){let e=await r.json();C(e)}}catch(e){console.error("Error fetching data:",e),b.default.error("Failed to load calendar data")}finally{D(!1)}},T=()=>(function(e,t){(0,g.Z)(1,arguments);var r,s=e||{},n=(0,h.Z)(s.start),a=(0,h.Z)(s.end).getTime();if(!(n.getTime()<=a))throw RangeError("Invalid interval");var i=[];n.setHours(0,0,0,0);var l=Number(null!==(r=null==t?void 0:t.step)&&void 0!==r?r:1);if(l<1||isNaN(l))throw RangeError("`options.step` must be a number greater than 1");for(;n.getTime()<=a;)i.push((0,h.Z)(n)),n.setDate(n.getDate()+l),n.setHours(0,0,0,0);return i})({start:v(t),end:p(t)}),A=(e,t)=>Z.filter(r=>{let s=new Date(r.checkIn),n=new Date(r.checkOut);return r.room.id===e&&t>=s&&t<n}),F=e=>{if(0===e.length)return"available";let t=e.find(e=>["PENDING","CONFIRMED","CHECKED_IN"].includes(e.status));return t?"CHECKED_IN"===t.status?"occupied":"CONFIRMED"===t.status?"confirmed":"pending":"available"},Y=e=>{switch(e){case"available":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"occupied":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"confirmed":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},_=e=>{switch(e){case"available":case"confirmed":return(0,s.jsx)(i.Z,{className:"w-4 h-4"});case"occupied":return(0,s.jsx)(l.Z,{className:"w-4 h-4"});case"pending":return(0,s.jsx)(c.Z,{className:"w-4 h-4"});default:return(0,s.jsx)(d.Z,{className:"w-4 h-4"})}},z=e=>{S(e)},H=()=>M?Z.filter(e=>{let t=new Date(e.checkIn),r=new Date(e.checkOut);return M>=t&&M<r}):[];return E?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Room Availability Calendar"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"View room availability and bookings across all dates"})]}),(0,s.jsx)(x.Zb,{className:"mb-6",children:(0,s.jsx)(x.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(m.z,{variant:"outline",onClick:()=>r(function(e,t){return(0,g.Z)(2,arguments),j(e,-(0,y.Z)(1))}(t,1)),children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Previous"]}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:(0,N.Z)(t,"MMMM yyyy")}),(0,s.jsxs)(m.z,{variant:"outline",onClick:()=>r(j(t,1)),children:["Next",(0,s.jsx)(u.Z,{className:"w-4 h-4 ml-2"})]})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{children:(0,s.jsx)(x.ll,{children:"Room Availability"})}),(0,s.jsx)(x.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left p-2 font-medium",children:"Room"}),T().map(e=>(0,s.jsxs)("th",{className:"text-center p-2 font-medium min-w-[60px]",children:[(0,s.jsx)("div",{className:"text-sm",children:(0,N.Z)(e,"d")}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:(0,N.Z)(e,"EEE")})]},e.toISOString()))]})}),(0,s.jsx)("tbody",{children:w.map(e=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsxs)("td",{className:"p-2",children:[(0,s.jsxs)("div",{className:"font-medium",children:["Room ",e.number]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.type})]}),T().map(t=>{let r=F(A(e.id,t));return(0,s.jsx)("td",{className:"p-1",children:(0,s.jsx)("div",{className:"p-2 rounded cursor-pointer hover:opacity-80 transition-opacity ".concat(Y(r)),onClick:()=>z(t),children:(0,s.jsx)("div",{className:"flex items-center justify-center",children:_(r)})})},t.toISOString())})]},e.id))})]})})})]})}),(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{children:(0,s.jsx)(x.ll,{children:"Legend"})}),(0,s.jsxs)(x.aY,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-100 rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Available"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-blue-100 rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Confirmed"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-yellow-100 rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Pending"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-red-100 rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Occupied"})]})]})]}),M&&(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{children:(0,s.jsx)(x.ll,{children:(0,N.Z)(M,"EEEE, MMMM d, yyyy")})}),(0,s.jsx)(x.aY,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[H().map(e=>(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"font-medium",children:["Room ",e.room.number]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[e.user.name," - ",e.guests," guests"]}),(0,s.jsx)(f.C,{className:"mt-1",children:e.status.replace("_"," ")})]},e.id)),0===H().length&&(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"No bookings for this date"})]})})]}),(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{children:(0,s.jsx)(x.ll,{children:"Quick Stats"})}),(0,s.jsx)(x.aY,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"Total Rooms:"}),(0,s.jsx)("span",{className:"font-medium",children:w.length})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"Available Today:"}),(0,s.jsx)("span",{className:"font-medium text-green-600",children:w.filter(e=>"AVAILABLE"===e.status).length})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"Occupied Today:"}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:w.filter(e=>"OCCUPIED"===e.status).length})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm",children:"Maintenance:"}),(0,s.jsx)("span",{className:"font-medium text-yellow-600",children:w.filter(e=>"MAINTENANCE"===e.status).length})]})]})})]})]})]})]})})}},31478:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var s=r(57437);r(2265);var n=r(96061),a=r(1657);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...n})}},85754:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(57437),n=r(2265),a=r(96061),i=r(1657);let l=(0,a.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:a,asChild:c=!1,...d}=e;return(0,s.jsx)("button",{className:(0,i.cn)(l({variant:n,size:a,className:r})),ref:t,...d})});c.displayName="Button"},27815:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var s=r(57437),n=r(2265),a=r(1657);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},1657:function(e,t,r){"use strict";r.d(t,{T4:function(){return i},cn:function(){return a},p6:function(){return l}});var s=r(57042),n=r(74769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}}},function(e){e.O(0,[250,749,904,971,938,744],function(){return e(e.s=22084)}),_N_E=e.O()}]);