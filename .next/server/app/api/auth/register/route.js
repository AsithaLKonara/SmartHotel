"use strict";(()=>{var e={};e.id=3002,e.ids=[3002],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},20934:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>j,patchFetch:()=>x,requestAsyncStorage:()=>w,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>Z,staticGenerationBailout:()=>P});var a={};t.r(a),t.d(a,{POST:()=>h});var s=t(95419),i=t(69108),o=t(99678),n=t(78070),u=t(6521),l=t.n(u),d=t(44843),p=t(25252),m=t(52178);let c=p.Ry({name:p.Z_().min(1,"Name is required"),email:p.Z_().email("Invalid email address"),password:p.Z_().min(6,"Password must be at least 6 characters"),phone:p.Z_().optional()});async function h(e){try{let r=await e.json(),t=c.parse(r);if(await d.Z.user.findUnique({where:{email:t.email}}))return n.Z.json({error:"User with this email already exists"},{status:400});let a=await l().hash(t.password,12),s=await d.Z.user.create({data:{name:t.name,email:t.email,password:a,phone:t.phone,role:"GUEST"},select:{id:!0,name:!0,email:!0,role:!0,createdAt:!0}});return n.Z.json({message:"User created successfully",user:s},{status:201})}catch(e){if(e instanceof m.jm)return n.Z.json({error:"Validation error",details:e.errors},{status:400});return console.error("Error creating user:",e),n.Z.json({error:"Failed to create user"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\Users\\asith\\Documents\\SmartHotel\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:w,staticGenerationAsyncStorage:Z,serverHooks:f,headerHooks:v,staticGenerationBailout:P}=g,j="/api/auth/register/route";function x(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:Z})}},44843:(e,r,t)=>{t.d(r,{Z:()=>s});let a=require("@prisma/client"),s=globalThis.prisma??new a.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,5640,8070,5252],()=>t(20934));module.exports=a})();