(()=>{var e={};e.id=9424,e.ids=[9424],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},81797:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d});var a=t(50482),r=t(69108),l=t(62563),i=t.n(l),n=t(68300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["admin",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5496)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\bookings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66294)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,35250)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\bookings\\page.tsx"],x="/admin/bookings/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/bookings/page",pathname:"/admin/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},58207:(e,s,t)=>{Promise.resolve().then(t.bind(t,15432))},15432:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(95344),r=t(3729),l=t(47674),i=t(28765),n=t(17418),c=t(55794),d=t(18822),o=t(48411),x=t(53148),m=t(38271),u=t(16212),h=t(61351),g=t(69436),p=t(35434),j=t(44669);function y(){let[e,s]=(0,r.useState)([]),[t,y]=(0,r.useState)(!0),[N,b]=(0,r.useState)(""),[v,f]=(0,r.useState)("all"),[k,C]=(0,r.useState)("all"),[w,E]=(0,r.useState)(null),{data:D}=(0,l.useSession)();(0,r.useEffect)(()=>{P()},[]);let P=async()=>{try{let e=await fetch("/api/bookings");if(e.ok){let t=await e.json();s(t)}else j.default.error("Failed to fetch bookings")}catch(e){j.default.error("Error fetching bookings")}finally{y(!1)}},S=async(e,s)=>{try{let t=await fetch(`/api/bookings/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})});if(t.ok)j.default.success("Booking status updated successfully"),P();else{let e=await t.json();j.default.error(e.error||"Failed to update booking status")}}catch(e){j.default.error("Error updating booking status")}},Z=async e=>{if(confirm("Are you sure you want to delete this booking?"))try{let s=await fetch(`/api/bookings/${e}`,{method:"DELETE"});if(s.ok)j.default.success("Booking deleted successfully"),P();else{let e=await s.json();j.default.error(e.error||"Failed to delete booking")}}catch(e){j.default.error("Error deleting booking")}},I=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"CHECKED_IN":return"bg-green-100 text-green-800";case"CHECKED_OUT":default:return"bg-gray-100 text-gray-800";case"CANCELLED":return"bg-red-100 text-red-800"}},_=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"PAID":return"bg-green-100 text-green-800";case"FAILED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},M=e.filter(e=>{let s=e.user.name.toLowerCase().includes(N.toLowerCase())||e.room.number.toLowerCase().includes(N.toLowerCase())||e.user.email.toLowerCase().includes(N.toLowerCase()),t="all"===v||e.status===v,a="all"===k||e.paymentStatus===k;return s&&t&&a});return t?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-6"}),a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/3"})]},s))})]})})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h1",{className:"text-3xl font-bold",children:"Booking Management"})}),a.jsx(h.Zb,{className:"mb-6",children:a.jsx(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Search"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search bookings...",value:N,onChange:e=>b(e.target.value),className:"pl-10 input-field"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),(0,a.jsxs)("select",{value:v,onChange:e=>f(e.target.value),className:"input-field",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"PENDING",children:"Pending"}),a.jsx("option",{value:"CONFIRMED",children:"Confirmed"}),a.jsx("option",{value:"CHECKED_IN",children:"Checked In"}),a.jsx("option",{value:"CHECKED_OUT",children:"Checked Out"}),a.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Status"}),(0,a.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"input-field",children:[a.jsx("option",{value:"all",children:"All Payment Status"}),a.jsx("option",{value:"PENDING",children:"Pending"}),a.jsx("option",{value:"PAID",children:"Paid"}),a.jsx("option",{value:"FAILED",children:"Failed"}),a.jsx("option",{value:"REFUNDED",children:"Refunded"})]})]}),a.jsx("div",{className:"flex items-end",children:(0,a.jsxs)(u.z,{variant:"outline",onClick:()=>{b(""),f("all"),C("all")},className:"w-full",children:[a.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})})]})})}),a.jsx("div",{className:"space-y-4",children:M.map(e=>a.jsx(h.Zb,{className:"hover:shadow-lg transition-shadow",children:a.jsx(h.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Booking #",e.id.slice(-8)]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:[e.user.name," - ",e.user.email]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(g.C,{className:I(e.status),children:e.status}),a.jsx(g.C,{className:_(e.paymentStatus),children:e.paymentStatus})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Check-in"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:(0,p.Z)(new Date(e.checkIn),"MMM dd, yyyy")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Check-out"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:(0,p.Z)(new Date(e.checkOut),"MMM dd, yyyy")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Guests"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.guests," ",1===e.guests?"guest":"guests"]})]})]})]}),a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Room:"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.room.number," (",e.room.type,")"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["$",e.totalAmount]})]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-2 lg:flex-col",children:[(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>E(e),children:[a.jsx(x.Z,{className:"w-4 h-4 mr-1"}),"View"]}),"PENDING"===e.status&&a.jsx(u.z,{variant:"outline",size:"sm",onClick:()=>S(e.id,"CONFIRMED"),children:"Confirm"}),"CONFIRMED"===e.status&&a.jsx(u.z,{variant:"outline",size:"sm",onClick:()=>S(e.id,"CHECKED_IN"),children:"Check In"}),"CHECKED_IN"===e.status&&a.jsx(u.z,{variant:"outline",size:"sm",onClick:()=>S(e.id,"CHECKED_OUT"),children:"Check Out"}),["PENDING","CONFIRMED"].includes(e.status)&&a.jsx(u.z,{variant:"outline",size:"sm",onClick:()=>S(e.id,"CANCELLED"),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Cancel"}),"CANCELLED"===e.status&&a.jsx(u.z,{variant:"outline",size:"sm",onClick:()=>Z(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(m.Z,{className:"w-4 h-4"})})]})]})})},e.id))}),0===M.length&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bookings found matching your criteria."})}),w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Booking Details"}),(0,a.jsxs)(u.z,{variant:"ghost",size:"icon",onClick:()=>E(null),children:[a.jsx("span",{className:"sr-only",children:"Close"}),"\xd7"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Guest Information"}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Name:"})," ",w.user.name]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Email:"})," ",w.user.email]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Guests:"})," ",w.guests]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Room Information"}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Room:"})," ",w.room.number]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Type:"})," ",w.room.type]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Total Amount:"})," $",w.totalAmount]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Dates"}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Check-in:"})," ",(0,p.Z)(new Date(w.checkIn),"PPP")]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Check-out:"})," ",(0,p.Z)(new Date(w.checkOut),"PPP")]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Booked on:"})," ",(0,p.Z)(new Date(w.createdAt),"PPP")]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Status"}),a.jsx(g.C,{className:I(w.status),children:w.status}),a.jsx("br",{}),a.jsx(g.C,{className:_(w.paymentStatus),children:w.paymentStatus})]})]}),w.specialRequests&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Special Requests"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:w.specialRequests})]})]})]})})]})})}},48411:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},53148:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},17418:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},28765:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},38271:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},18822:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5496:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,t(86843).createProxy)(String.raw`C:\Users\asith\Documents\SmartHotel\app\admin\bookings\page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1638,9990,4655,4626,7674,5674,7483,1088],()=>t(81797));module.exports=a})();