(()=>{var e={};e.id=9889,e.ids=[9889],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},45042:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=t(50482),l=t(69108),r=t(62563),i=t.n(r),n=t(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["admin",{children:["tasks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17342)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\tasks\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66294)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,35250)),"C:\\Users\\asith\\Documents\\SmartHotel\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\asith\\Documents\\SmartHotel\\app\\admin\\tasks\\page.tsx"],u="/admin/tasks/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/admin/tasks/page",pathname:"/admin/tasks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27274:(e,s,t)=>{Promise.resolve().then(t.bind(t,11023))},11023:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(95344),l=t(3729),r=t(47674),i=t(51838),n=t(17418),d=t(75695),c=t(38271),o=t(18822),u=t(55794),x=t(25545),m=t(7060);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,t(69224).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var p=t(16212),y=t(61351),j=t(69436),g=t(35434),v=t(44669);function f(){let{data:e}=(0,r.useSession)(),[s,t]=(0,l.useState)([]),[f,k]=(0,l.useState)([]),[N,b]=(0,l.useState)(!0),[E,C]=(0,l.useState)(!1),[D,w]=(0,l.useState)(null),[M,P]=(0,l.useState)("all"),[S,T]=(0,l.useState)("all"),[O,I]=(0,l.useState)("all"),[Z,A]=(0,l.useState)({title:"",description:"",type:"HOUSEKEEPING",priority:"MEDIUM",assignedTo:"",dueDate:""});(0,l.useEffect)(()=>{H()},[]);let H=async()=>{try{b(!0);let[e,s]=await Promise.all([fetch("/api/tasks"),fetch("/api/staff")]);if(e.ok){let s=await e.json();t(s)}if(s.ok){let e=await s.json();k(e)}}catch(e){console.error("Error fetching data:",e),v.default.error("Failed to load data")}finally{b(!1)}},_=async e=>{e.preventDefault();try{let e=D?`/api/tasks/${D.id}`:"/api/tasks",s=await fetch(e,{method:D?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)});if(s.ok)v.default.success(D?"Task updated successfully":"Task created successfully"),C(!1),w(null),L(),H();else{let e=await s.json();v.default.error(e.error||"Failed to save task")}}catch(e){console.error("Error saving task:",e),v.default.error("Failed to save task")}},G=async e=>{if(confirm("Are you sure you want to delete this task?"))try{let s=await fetch(`/api/tasks/${e}`,{method:"DELETE"});if(s.ok)v.default.success("Task deleted successfully"),H();else{let e=await s.json();v.default.error(e.error||"Failed to delete task")}}catch(e){console.error("Error deleting task:",e),v.default.error("Failed to delete task")}},R=async(e,s)=>{try{let t=await fetch(`/api/tasks/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,completedAt:"COMPLETED"===s?new Date().toISOString():null})});if(t.ok)v.default.success("Task status updated successfully"),H();else{let e=await t.json();v.default.error(e.error||"Failed to update task")}}catch(e){console.error("Error updating task:",e),v.default.error("Failed to update task")}},L=()=>{A({title:"",description:"",type:"HOUSEKEEPING",priority:"MEDIUM",assignedTo:"",dueDate:""})},U=e=>{w(e),A({title:e.title,description:e.description||"",type:e.type,priority:e.priority,assignedTo:e.assignedTo||"",dueDate:e.dueDate?(0,g.Z)(new Date(e.dueDate),"yyyy-MM-dd"):""}),C(!0)},z=()=>s.filter(e=>{let s="all"===M||e.status===M,t="all"===S||e.type===S,a="all"===O||e.priority===O;return s&&t&&a}),q=e=>{let s={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PROGRESS:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",COMPLETED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",CANCELLED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return s[e]||s.PENDING},F=e=>{let s={LOW:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",MEDIUM:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",HIGH:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return s[e]||s.MEDIUM},V=e=>({HOUSEKEEPING:"\uD83E\uDDF9",MAINTENANCE:"\uD83D\uDD27",ROOM_SERVICE:"\uD83C\uDF7D️",CONCIERGE:"\uD83C\uDFAB",OTHER:"\uD83D\uDCCB"})[e]||"\uD83D\uDCCB";return N?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Task Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Assign and manage hotel tasks for staff"})]}),(0,a.jsxs)(p.z,{onClick:()=>C(!0),children:[a.jsx(i.Z,{className:"w-4 h-4 mr-2"}),"Create Task"]})]})}),a.jsx(y.Zb,{className:"mb-6",children:a.jsx(y.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),(0,a.jsxs)("select",{value:M,onChange:e=>P(e.target.value),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"PENDING",children:"Pending"}),a.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),a.jsx("option",{value:"COMPLETED",children:"Completed"}),a.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),(0,a.jsxs)("select",{value:S,onChange:e=>T(e.target.value),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"HOUSEKEEPING",children:"Housekeeping"}),a.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),a.jsx("option",{value:"ROOM_SERVICE",children:"Room Service"}),a.jsx("option",{value:"CONCIERGE",children:"Concierge"}),a.jsx("option",{value:"OTHER",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority"}),(0,a.jsxs)("select",{value:O,onChange:e=>I(e.target.value),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"all",children:"All Priorities"}),a.jsx("option",{value:"LOW",children:"Low"}),a.jsx("option",{value:"MEDIUM",children:"Medium"}),a.jsx("option",{value:"HIGH",children:"High"})]})]}),a.jsx("div",{className:"flex items-end",children:(0,a.jsxs)(p.z,{variant:"outline",onClick:()=>{P("all"),T("all"),I("all")},children:[a.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})})]})})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z().map(e=>(0,a.jsxs)(y.Zb,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(y.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-2xl",children:V(e.type)}),(0,a.jsxs)("div",{children:[a.jsx(y.ll,{className:"text-lg",children:e.title}),a.jsx("p",{className:"text-sm text-gray-500",children:e.type.replace("_"," ")})]})]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[a.jsx(p.z,{size:"sm",variant:"ghost",onClick:()=>U(e),children:a.jsx(d.Z,{className:"w-4 h-4"})}),a.jsx(p.z,{size:"sm",variant:"ghost",onClick:()=>G(e.id),children:a.jsx(c.Z,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)(y.aY,{children:[e.description&&a.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(j.C,{className:q(e.status),children:e.status.replace("_"," ")}),a.jsx(j.C,{className:F(e.priority),children:e.priority})]}),e.assignedTo&&e.staff&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[a.jsx(o.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),(0,a.jsxs)("span",{children:["Assigned to: ",e.staff.name]})]}),e.dueDate&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[a.jsx(u.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),(0,a.jsxs)("span",{children:["Due: ",(0,g.Z)(new Date(e.dueDate),"MMM d, yyyy")]})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[a.jsx(x.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),(0,a.jsxs)("span",{children:["Created: ",(0,g.Z)(new Date(e.createdAt),"MMM d, yyyy")]})]}),e.completedAt&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsxs)("span",{children:["Completed: ",(0,g.Z)(new Date(e.completedAt),"MMM d, yyyy")]})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex space-x-2",children:["PENDING"===e.status&&a.jsx(p.z,{size:"sm",onClick:()=>R(e.id,"IN_PROGRESS"),className:"flex-1",children:"Start"}),"IN_PROGRESS"===e.status&&a.jsx(p.z,{size:"sm",onClick:()=>R(e.id,"COMPLETED"),className:"flex-1",children:"Complete"}),"COMPLETED"!==e.status&&"CANCELLED"!==e.status&&a.jsx(p.z,{size:"sm",variant:"outline",onClick:()=>R(e.id,"CANCELLED"),children:"Cancel"})]})]})]},e.id))}),0===z().length&&a.jsx(y.Zb,{children:(0,a.jsxs)(y.aY,{className:"p-8 text-center",children:[a.jsx(h,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No tasks found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"all"!==M||"all"!==S||"all"!==O?"Try adjusting your filters":"Create your first task to get started"}),"all"===M&&"all"===S&&"all"===O&&(0,a.jsxs)(p.z,{onClick:()=>C(!0),children:[a.jsx(i.Z,{className:"w-4 h-4 mr-2"}),"Create Task"]})]})}),E&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:D?"Edit Task":"Create New Task"}),(0,a.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),a.jsx("input",{type:"text",value:Z.title,onChange:e=>A({...Z,title:e.target.value}),className:"w-full p-2 border rounded-md",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),a.jsx("textarea",{value:Z.description,onChange:e=>A({...Z,description:e.target.value}),className:"w-full p-2 border rounded-md",rows:3})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),(0,a.jsxs)("select",{value:Z.type,onChange:e=>A({...Z,type:e.target.value}),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"HOUSEKEEPING",children:"Housekeeping"}),a.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),a.jsx("option",{value:"ROOM_SERVICE",children:"Room Service"}),a.jsx("option",{value:"CONCIERGE",children:"Concierge"}),a.jsx("option",{value:"OTHER",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority"}),(0,a.jsxs)("select",{value:Z.priority,onChange:e=>A({...Z,priority:e.target.value}),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"LOW",children:"Low"}),a.jsx("option",{value:"MEDIUM",children:"Medium"}),a.jsx("option",{value:"HIGH",children:"High"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Assign To"}),(0,a.jsxs)("select",{value:Z.assignedTo,onChange:e=>A({...Z,assignedTo:e.target.value}),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"",children:"Unassigned"}),f.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - ",e.position]},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Due Date"}),a.jsx("input",{type:"date",value:Z.dueDate,onChange:e=>A({...Z,dueDate:e.target.value}),className:"w-full p-2 border rounded-md"})]}),(0,a.jsxs)("div",{className:"flex space-x-2 pt-4",children:[a.jsx(p.z,{type:"submit",className:"flex-1",children:D?"Update Task":"Create Task"}),a.jsx(p.z,{type:"button",variant:"outline",onClick:()=>{C(!1),w(null),L()},children:"Cancel"})]})]})]})})]})})}},7060:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},25545:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},17418:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},75695:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},51838:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},38271:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},18822:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},17342:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>l,default:()=>i});let a=(0,t(86843).createProxy)(String.raw`C:\Users\asith\Documents\SmartHotel\app\admin\tasks\page.tsx`),{__esModule:l,$$typeof:r}=a,i=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1638,9990,4655,4626,7674,5674,7483,1088],()=>t(45042));module.exports=a})();